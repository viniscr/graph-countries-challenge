(this["webpackJsonpgraph-countries-challenge"]=this["webpackJsonpgraph-countries-challenge"]||[]).push([[0],{80:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(2),r=n(10),i=n(68),s=n.n(i),l=(n(80),n(23)),o=n(24),j=n(9),u=n(15),d=n(45);function b(){var e=Object(d.a)(["\n  query {\n    details\n  }\n"]);return b=function(){return e},e}function O(){var e=Object(d.a)(["\n  query {\n    list @client\n  }\n"]);return O=function(){return e},e}function h(){var e=Object(d.a)(["\n  query {\n    Country {\n      _id\n      capital\n      name\n      flag {\n        svgFile\n      }\n      area\n      population\n      topLevelDomains {\n        name\n      }\n    }\n  }\n"]);return h=function(){return e},e}var m=Object(r.gql)(h()),x=Object(r.gql)(O()),p=Object(r.gql)(b()),f=function(e){var t=e.country,n=t.name,c=t.capital,r=t.flag,i=t._id;return Object(a.jsx)("article",{className:"card",children:Object(a.jsxs)(o.b,{to:"countries/".concat(i),children:[Object(a.jsx)("div",{className:"card__media",children:Object(a.jsx)("img",{className:"card__flag",src:r.svgFile,alt:"Country Flag"})}),Object(a.jsxs)("div",{className:"card__content",children:[Object(a.jsx)("h2",{className:"card__name",children:n}),Object(a.jsx)("span",{className:"card__capital",children:c})]})]})})},v=n(44),g=function(e){var t=e.handleSearch,n=e.hasSearch,r=Object(c.useState)(""),i=Object(u.a)(r,2),s=i[0],l=i[1];return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("h1",{className:"header__title",children:"Country Finder"}),n&&Object(a.jsxs)("form",{action:"#",className:"search",onSubmit:function(e){e.preventDefault(),t&&t(s)},children:[Object(a.jsx)("input",{type:"text",className:"search__input",placeholder:"Search Country",value:s,onChange:function(e){return l(e.target.value)}}),Object(a.jsx)(v.b,{className:"search__icon"})]})]})};var y=function(){var e=Object(r.useLazyQuery)(x,{variables:{term:""}}),t=Object(u.a)(e,2),n=t[0],i=t[1],s=i.error,l=i.loading,j=i.data;return Object(c.useEffect)((function(){n()}),[n]),l?Object(a.jsx)("p",{children:"Loading..."}):s?Object(a.jsx)("p",{children:"Failed :("}):void 0===j?Object(a.jsx)("p",{children:"Loading..."}):0===j.list.length?Object(a.jsxs)("p",{children:["Pa\xeds n\xe3o encontrado. Tente novamente. ",Object(a.jsx)("br",{}),Object(a.jsx)(o.b,{to:"/countries",children:"Voltar"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(g,{hasSearch:!0,handleSearch:function(e){n({variables:{term:e}})}}),Object(a.jsx)("div",{className:"countries-list-container",children:j.list.map((function(e,t){return Object(a.jsx)(f,{country:e},t)}))})]})},_=function(e){var t=e.match,n=Object(r.useLazyQuery)(p,{variables:{id:t.params.id}}),i=Object(u.a)(n,2),s=i[0],l=i[1],j=l.error,d=l.loading,b=l.data;if(Object(c.useEffect)((function(){s()}),[]),d)return Object(a.jsx)("p",{children:"Loading..."});if(j)return Object(a.jsx)("p",{children:"Failed :("});if(void 0===b)return Object(a.jsx)("p",{children:"Loading..."});if(0===b.details.length)return Object(a.jsxs)("p",{children:["Country not found. Please try again. ",Object(a.jsx)("br",{}),Object(a.jsx)(o.b,{to:"/countries",children:"Voltar"})]});var O=b.details,h=(O._id,O.name),m=O.flag,x=O.capital,f=O.area,y=O.population,_=O.topLevelDomains;return Object(a.jsxs)("div",{children:[Object(a.jsx)(g,{hasSearch:!1}),Object(a.jsxs)("div",{className:"country-detail-container",children:[Object(a.jsxs)(o.b,{className:"country-detail-back-button",to:"/countries",children:[Object(a.jsx)(v.a,{className:"country-detail-back-button__icon"}),"Go back"]}),Object(a.jsxs)("div",{className:"country-detail-content",children:[Object(a.jsx)("div",{className:"country-detail-content-media",children:Object(a.jsx)("img",{className:"country-detail-content-media-img",src:m.svgFile,alt:" Flag of ".concat(h," ")})}),Object(a.jsxs)("div",{className:"country-detail-content-info",children:[Object(a.jsx)("h2",{className:"country-detail-content-info__name",children:h}),Object(a.jsxs)("div",{className:"country-detail-content-info-details",children:[Object(a.jsx)("h3",{className:"country-detail-content-info__title",children:"Capital"}),Object(a.jsx)("p",{className:"country-detail-content-info__value",children:x}),Object(a.jsx)("h3",{className:"country-detail-content-info__title",children:"Area"}),Object(a.jsx)("p",{className:"country-detail-content-info__value",children:f}),Object(a.jsx)("h3",{className:"country-detail-content-info__title",children:"Population"}),Object(a.jsx)("p",{className:"country-detail-content-info__value",children:y}),Object(a.jsx)("h3",{className:"country-detail-content-info__title",children:"Top level domain"}),Object(a.jsx)("p",{className:"country-detail-content-info__value",children:_[0].name})]})]})]}),Object(a.jsx)(o.b,{className:"country-detail-btn-edit",to:"/countries/edit/".concat(t.params.id),children:"Edit"})]})]})},N=n(73),C=Object(r.makeVar)([]),L=n(74),S=function(e){var t=e.label,n=e.name,c=Object(L.a)(e,["label","name"]);return Object(a.jsxs)("div",{className:"input-block",children:[Object(a.jsx)("label",{htmlFor:n,children:t}),Object(a.jsx)("input",Object(l.a)({type:"text",id:n},c))]})},F=function(e){var t=e.country,n=e.handleEdit,r=Object(c.useState)(t.name),i=Object(u.a)(r,2),s=i[0],o=i[1],j=Object(c.useState)(t.flag.svgFile),d=Object(u.a)(j,2),b=d[0],O=d[1],h=Object(c.useState)(t.capital),m=Object(u.a)(h,2),x=m[0],p=m[1],f=Object(c.useState)(t.area),v=Object(u.a)(f,2),g=v[0],y=v[1],_=Object(c.useState)(t.population),N=Object(u.a)(_,2),C=N[0],L=N[1],F=Object(c.useState)(t.topLevelDomains[0].name),D=Object(u.a)(F,2),k=D[0],w=D[1];return Object(a.jsx)("div",{className:"country-edit-container",children:Object(a.jsx)("main",{children:Object(a.jsx)("form",{className:"country-edit-form",onSubmit:function(e){e.preventDefault();var a=Object(l.a)(Object(l.a)({},t),{},{name:s,flag:Object(l.a)(Object(l.a)({},t.flag),{},{svgFile:b}),topLevelDomains:[Object(l.a)(Object(l.a)({},t.topLevelDomains[0]),{},{name:k})],capital:x,area:g,population:C});n(a)},children:Object(a.jsxs)("fieldset",{children:[Object(a.jsx)("legend",{children:"Details"}),Object(a.jsx)(S,{name:"flag",label:"Flag",value:b,onChange:function(e){O(e.target.value)}}),Object(a.jsx)(S,{name:"name",label:"Name",value:s,onChange:function(e){o(e.target.value)}}),Object(a.jsx)(S,{name:"capital",type:"text",label:"Capital",value:x,onChange:function(e){p(e.target.value)}}),Object(a.jsx)(S,{name:"area",label:"Area",value:g,type:"number",onChange:function(e){y(e.target.value)}}),Object(a.jsx)(S,{name:"population",type:"number",label:"Population",value:C,onChange:function(e){L(e.target.value)}}),Object(a.jsx)(S,{name:"topleveldomain",type:"text",label:"Top Level Domain",value:k,onChange:function(e){w(e.target.value)}}),Object(a.jsx)("button",{type:"submit",children:"Save"})]})})})})},D=function(e){var t=e.match,n=e.history,i=Object(r.useLazyQuery)(p,{variables:{id:t.params.id}}),s=Object(u.a)(i,2),l=s[0],o=s[1],j=o.error,d=o.loading,b=o.data;if(Object(c.useEffect)((function(){l()}),[]),d)return Object(a.jsx)("p",{children:"Loading..."});if(j)return Object(a.jsx)("p",{children:"Failed :("});if(void 0===b)return Object(a.jsx)("p",{children:"Loading..."});return Object(a.jsxs)("div",{children:[Object(a.jsx)(g,{hasSearch:!1}),Object(a.jsx)(F,{country:b.details,handleEdit:function(e){var t=C().map((function(t){return t._id===e._id?e:t}));C(Object(N.a)(t)),n.push("/countries")}})]})};var k=function(){return Object(a.jsx)(o.a,{children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{path:"/countries",exact:!0,component:y}),Object(a.jsx)(j.b,{path:"/countries/:id",exact:!0,render:function(e){var t=e.match;return Object(a.jsx)(_,{match:t})}}),Object(a.jsx)(j.b,{path:"/countries/edit/:id",render:function(e){return Object(a.jsx)(D,Object(l.a)({},e))}}),Object(a.jsx)(j.a,{to:"/countries"})]})})};var w=function(){var e=Object(r.useQuery)(m),t=e.loading,n=e.data;return t?Object(a.jsx)("p",{children:"Loading ..."}):(C(n.Country),Object(a.jsx)(k,{}))},E=new r.InMemoryCache({typePolicies:{Query:{fields:{list:{read:function(e,t){var n=t.variables;return C().filter((function(e){return e.name.toLowerCase().indexOf(n.term.toLowerCase())>=0}))}},details:{read:function(e,t){var n=t.variables,a=C().find((function(e){return e._id===n.id}));return a||[]}}}}}}),q=new r.ApolloClient({uri:"https://countries-274616.ew.r.appspot.com",cache:E});s.a.render(Object(a.jsx)(r.ApolloProvider,{client:q,children:Object(a.jsx)(w,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.64c8b82c.chunk.js.map